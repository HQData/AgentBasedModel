
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>analyzer module &#8212; ABMHAP 2018.06 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="chad_demography module" href="chad_demography.html" />
    <link rel="prev" title="analysis module" href="analysis.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-analyzer">
<span id="analyzer-module"></span><h1>analyzer module<a class="headerlink" href="#module-analyzer" title="Permalink to this headline">¶</a></h1>
<p>For a given activity, this code compares how well the ABMHAP matches the CHAD data. This is useful for the quality assurance and quality control (QAQC). This code compares the distributions of mean activity-start-time and mean activity duration for the respective activity.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">I will need to update this definition</p>
</div>
<dl class="function">
<dt id="analyzer.get_activity_data">
<code class="descclassname">analyzer.</code><code class="descname">get_activity_data</code><span class="sig-paren">(</span><em>df</em>, <em>act</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/analyzer.html#get_activity_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#analyzer.get_activity_data" title="Permalink to this definition">¶</a></dt>
<dd><p>This function returns the activity data from an activity diary     of given respective agent.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> (<em>pandas.core.frame.DataFrame</em>) – the activity diary</li>
<li><strong>act</strong> (<em>int</em>) – ABMHAP activity code</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">an activity diary containing information from the given activity</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pandas.core.frame.DataFrame</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="analyzer.get_moments">
<code class="descclassname">analyzer.</code><code class="descname">get_moments</code><span class="sig-paren">(</span><em>abm_list</em>, <em>do_periodic=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/analyzer.html#get_moments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#analyzer.get_moments" title="Permalink to this definition">¶</a></dt>
<dd><p>This function calculates both the mean and the standard deviation for start time, end time, and     duration for a given activity for each agent simulated.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>abm_list</strong> (<em>list of pandas.core.frame.DataFrame</em>) – the activity diary for a given activity for each agent</li>
<li><strong>do_periodic</strong> (<em>bool</em>) – this flag indicates whether (if True) or not (if False) to do the     analysis on a time scale that is [-12, 12). This is useful for activities that may occur     over midnight.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">information containing the the mean and standard deviation information for start time,     end time, and duration for the simulated agents for a given activity</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.ndarray, numpy.ndarray, numpy.ndarray, numpy.ndarray,     numpy.ndarray, numpy.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="analyzer.get_simulation_data">
<code class="descclassname">analyzer.</code><code class="descname">get_simulation_data</code><span class="sig-paren">(</span><em>df_list</em>, <em>act</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/analyzer.html#get_simulation_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#analyzer.get_simulation_data" title="Permalink to this definition">¶</a></dt>
<dd><p>This function obtains the simulation data for a given activity from each each agent in the
simulation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df_list</strong> (<em>list of pandas.core.frame.DataFrame</em>) – the activity diaries for each agent in the entire simulation</li>
<li><strong>act</strong> (<em>int</em>) – the ABMHAP activity code</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the activity diary containing information for the respective activity     for each agent simulated</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">list of pandas.core.frame.DataFrame</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="analyzer.get_verify_fpath">
<code class="descclassname">analyzer.</code><code class="descname">get_verify_fpath</code><span class="sig-paren">(</span><em>fdir</em>, <em>act_codes</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/analyzer.html#get_verify_fpath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#analyzer.get_verify_fpath" title="Permalink to this definition">¶</a></dt>
<dd><p>This function returns the directories corresponding to the specified activity codes     where figures of activities will be stored for a specific simulation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fdir</strong> – the file path to the directory of the figure data for a specific simulation.</li>
<li><strong>act_codes</strong> (<em>list of int</em>) – the ABMHAP activity codes for a given activity</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the directories corresponding to the specified activity codeds where figures     of the activities will be stored</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list of str</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="analyzer.load_plot_data">
<code class="descclassname">analyzer.</code><code class="descname">load_plot_data</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/analyzer.html#load_plot_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#analyzer.load_plot_data" title="Permalink to this definition">¶</a></dt>
<dd><p>This function loads the data from pickled (.pkl) figures. This assumes that the figures plotted the
ABM data first and then the CHAD data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>fname</strong> (<em>str</em>) – the filename of the saved figure (.pkl)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the x and y data for the ABM and CHAD data, respectively</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy.ndarray, numpy.ndarray, numpy.ndarray, numpy.ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="analyzer.plot_cdf">
<code class="descclassname">analyzer.</code><code class="descname">plot_cdf</code><span class="sig-paren">(</span><em>data_abm</em>, <em>data_chad</em>, <em>xlabel</em>, <em>title</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/analyzer.html#plot_cdf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#analyzer.plot_cdf" title="Permalink to this definition">¶</a></dt>
<dd><p>This function plots the CDF for data related to the ABM and CHAD</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data_abm</strong> (<em>numpy.ndarray</em>) – the ABM data to be plotted</li>
<li><strong>data_chad</strong> (<em>numpy.ndarray</em>) – the CHAD data to be plotted</li>
<li><strong>xlabel</strong> (<em>str</em>) – the x-axis label</li>
<li><strong>title</strong> (<em>str</em>) – the title of the plot</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="analyzer.plot_cdf_new">
<code class="descclassname">analyzer.</code><code class="descname">plot_cdf_new</code><span class="sig-paren">(</span><em>data_abm</em>, <em>data_chad</em>, <em>fid</em>, <em>title</em>, <em>xlabel</em>, <em>do_periodic=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/analyzer.html#plot_cdf_new"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#analyzer.plot_cdf_new" title="Permalink to this definition">¶</a></dt>
<dd><p>This function plots the cumulative distribution function (CDF) comparing     the ABM and CHAD data for a given activity</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data_abm</strong> (<em>numpy.ndarray</em>) – </li>
<li><strong>data_chad</strong> (<em>numpy.ndarray</em>) – </li>
<li><strong>fid</strong> (<em>int</em>) – the figure identifier</li>
<li><strong>title</strong> (<em>str</em>) – the title of the figure</li>
<li><strong>xlabel</strong> (<em>str</em>) – the label of the x-axis</li>
<li><strong>do_periodic</strong> (<em>bool</em>) – this flag indicates whether (if True) or not (if False) to convert     the data to a time scale that is [-12, 12). This is useful for activities that may occur     over midnight.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the figure of the CDF</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">matplotlib.figure.Figure</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="analyzer.plot_verify_dt">
<code class="descclassname">analyzer.</code><code class="descname">plot_verify_dt</code><span class="sig-paren">(</span><em>act</em>, <em>data_abm</em>, <em>data_chad</em>, <em>fid</em>, <em>do_save_fig=False</em>, <em>fpath=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/analyzer.html#plot_verify_dt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#analyzer.plot_verify_dt" title="Permalink to this definition">¶</a></dt>
<dd><p>This function plots the cumulative distribution function (CDFs) in order to compare     the duration data for the given activity from the ABMHAP simulation to the CHAD data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>act</strong> (<em>int</em>) – the ABMHAP activity data</li>
<li><strong>data_abm</strong> (<em>numpy.ndarray</em>) – the ABMHAP duration data</li>
<li><strong>data_chad</strong> (<em>numpy.ndarray</em>) – the CHAD duration data</li>
<li><strong>fid</strong> (<em>int</em>) – the figure identifier</li>
<li><strong>do_save_fig</strong> (<em>bool</em>) – a flag indicating whether (if True) or not (if False)     to save the figure</li>
<li><strong>fpath</strong> (<em>str</em>) – the file path to the directory in which to save the figure</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="analyzer.plot_verify_end">
<code class="descclassname">analyzer.</code><code class="descname">plot_verify_end</code><span class="sig-paren">(</span><em>act</em>, <em>data_abm</em>, <em>data_chad</em>, <em>fid</em>, <em>do_save_fig=False</em>, <em>fpath=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/analyzer.html#plot_verify_end"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#analyzer.plot_verify_end" title="Permalink to this definition">¶</a></dt>
<dd><p>This function plots the cumulative distribution function (CDFs) in order to compare     the end time data for the given activity from the ABMHAP simulation to the CHAD data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>act</strong> (<em>int</em>) – the ABMHAP activity data</li>
<li><strong>data_abm</strong> (<em>numpy.ndarray</em>) – the ABMHAP end time data</li>
<li><strong>data_chad</strong> (<em>numpy.ndarray</em>) – the CHAD end time data</li>
<li><strong>fid</strong> (<em>int</em>) – the figure identifier</li>
<li><strong>do_save_fig</strong> (<em>bool</em>) – a flag indicating whether (if True) or not (if False)     to save the figure</li>
<li><strong>fpath</strong> (<em>str</em>) – the file path to the directory in which to save the figure</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="analyzer.plot_verify_start">
<code class="descclassname">analyzer.</code><code class="descname">plot_verify_start</code><span class="sig-paren">(</span><em>act</em>, <em>data_abm</em>, <em>data_chad</em>, <em>fid</em>, <em>do_save_fig=False</em>, <em>fpath=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/analyzer.html#plot_verify_start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#analyzer.plot_verify_start" title="Permalink to this definition">¶</a></dt>
<dd><p>This function plots the cumulative distribution function (CDFs) in order to compare     the start time data for the given activity from the ABMHAP simulation to the CHAD data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>act</strong> (<em>int</em>) – the ABMHAP activity data</li>
<li><strong>data_abm</strong> (<em>numpy.ndarray</em>) – the ABMHAP start time data</li>
<li><strong>data_chad</strong> (<em>numpy.ndarray</em>) – the CHAD start time data</li>
<li><strong>fid</strong> (<em>int</em>) – the figure identifier</li>
<li><strong>do_save_fig</strong> (<em>bool</em>) – a flag indicating whether (if True) or not (if False)     to save the figure</li>
<li><strong>fpath</strong> (<em>str</em>) – the file path to the directory in which to save the figure</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="analyzer.run">
<code class="descclassname">analyzer.</code><code class="descname">run</code><span class="sig-paren">(</span><em>num_process</em>, <em>num_hhld</em>, <em>num_batch</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/analyzer.html#run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#analyzer.run" title="Permalink to this definition">¶</a></dt>
<dd><p>This function runs the simulations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>num_process</strong> (<em>int</em>) – the number of processors (cores)</li>
<li><strong>num_hhld</strong> (<em>int</em>) – the number of households per core per batch</li>
<li><strong>num_batch</strong> (<em>int</em>) – the number of batches</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the results of the simulation</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="driver_result.html#driver_result.Driver_Result" title="driver_result.Driver_Result">driver_result.Driver_Result</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="analyzer.verify">
<code class="descclassname">analyzer.</code><code class="descname">verify</code><span class="sig-paren">(</span><em>trial_code</em>, <em>demo</em>, <em>chad_param_list</em>, <em>df_list</em>, <em>do_plot</em>, <em>do_print=False</em>, <em>fdir=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/analyzer.html#verify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#analyzer.verify" title="Permalink to this definition">¶</a></dt>
<dd><p>This code compares the results of the ABM to the CHAD data by comparing the cumulative distribution function     (CDF) of the duration and start times predicted by the ABM and that of respective CDFs from the CHAD data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>trial_code</strong> (<em>int</em>) – the trial code identifier</li>
<li><strong>demo</strong> (<em>int</em>) – the demographic identifier</li>
<li><strong>chad_param_list</strong> (list of <a class="reference internal" href="chad_params.html#chad_params.CHAD_params" title="chad_params.CHAD_params"><code class="xref py py-class docutils literal notranslate"><span class="pre">chad_params.CHAD_params</span></code></a>) – that limit the CHAD parameters sampling in initializing the households</li>
<li><strong>df_list</strong> (<em>list of pandas.core.frame.DataFrame</em>) – contains the activity diaries for each household</li>
<li><strong>do_plot</strong> (<em>bool</em>) – a flag to indicate whether (True) or not (False) to plot</li>
<li><strong>do_print</strong> (<em>bool</em>) – a flag to indicate whether (True) or not (False) to print various messages to the screen</li>
<li><strong>fdir</strong> (<em>list</em>) – a list of file directories needed to save the figures</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="analysis.html" title="previous chapter">analysis module</a></li>
      <li>Next: <a href="chad_demography.html" title="next chapter">chad_demography module</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/analyzer.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Namdi Brandon.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/analyzer.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>